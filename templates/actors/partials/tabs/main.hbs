<div class="tab" data-group="primary" data-tab="main">
  <section class="attributes-section">
    <div class="attributes-header">
      <p class="attributes-title">{{localize "RMRPG.Actor.Attributes.Title"}}</p>
    </div>

    <div class="attributes-grid">
      {{#each attributeCards}}
      <article class="attribute-card">
        <input
          class="attribute-value-input"
          type="number"
          inputmode="numeric"
          step="1"
          data-action="inline-attribute-value"
          data-attribute="{{this.key}}"
          name="system.attributes.{{this.key}}.value"
          value="{{this.value}}"
          aria-label="{{localize this.labelKey}}"
        />
        <p class="attribute-label">{{localize this.labelKey}}</p>
      </article>
      {{/each}}
    </div>
  </section>

  {{#if isPlayer}}
  <div class="main-sections">
    <section class="skills-section">
      <div class="section-header">
        <h3>{{localize "RMRPG.Actor.Skills.Title"}}</h3>
        <button type="button" class="section-action" data-action="edit-skills" aria-label="{{localize 'RMRPG.Actor.Skills.SettingsTitle'}}">
          <i class="fas fa-gear"></i>
        </button>
      </div>

      <div class="skills-list">
        {{#each skillEntries}}
        <div class="skill-row">
          <button
            type="button"
            class="skill-label-roll"
            data-action="roll-skill"
            data-attr="{{this.attribute}}"
            data-bonus="{{this.bonus}}"
            data-trained="{{this.trained}}"
            data-label="{{this.displayLabel}}"
            aria-label="{{localize 'RMRPG.Common.Roll'}} {{this.displayLabel}}"
            title="{{localize 'RMRPG.Common.Roll'}} {{this.displayLabel}}"
          >
            <p class="skill-roll-content">
              <i class="fas fa-dice-d20" aria-hidden="true"></i>
              <span class="skill-label-text">
                {{#if this.labelKey}}
                  {{localize this.labelKey}}
                {{else}}
                  {{this.label}}
                {{/if}}
              </span>
              <span class="skill-roll-inline">{{this.totalBonusLabel}}</span>
            </p>
          </button>
          <select class="skill-attribute-select" name="{{this.attributePath}}">
            {{selectOptions ../attributeOptions selected=this.attribute valueAttr="value" labelAttr="label"}}
          </select>
          <input class="skill-trained-toggle" type="checkbox" name="{{this.trainedPath}}" {{checked this.trained}} />
        </div>
        {{/each}}
      </div>

      <button type="button" class="add-skill" data-action="add-skill">{{localize "RMRPG.Actor.Skills.Add"}}</button>
    </section>

    <section class="advantages-section">
      <div class="section-header">
        <h3>{{localize "RMRPG.Actor.Advantages.Title"}}</h3>
      </div>
      <button type="button" class="add-feat" data-action="add-feat">{{localize "RMRPG.Actor.Feats.AddLabel"}}</button>
      {{#unless feats.length}}
      <div class="feat-drop-zone" data-action="feat-drop">
        <span>{{localize "RMRPG.Actor.Feats.DropHint"}}</span>
      </div>
      {{/unless}}
      <div class="feats-list">
        {{#each feats}}
        <div class="feat-row" data-id="{{this.id}}" draggable="true">
          <button
            type="button"
            class="feat-icon-button"
            data-action="feat-chat"
            data-id="{{this.id}}"
            aria-label="{{localize 'RMRPG.Actor.Feats.Chat'}}"
            title="{{localize 'RMRPG.Actor.Feats.Chat'}}"
          >
            <img class="feat-icon" src="{{this.img}}" title="{{this.name}}" />
            <span class="feat-chat-overlay" aria-hidden="true">
              <i class="fas fa-comments"></i>
            </span>
          </button>
          <button
            type="button"
            class="feat-name"
            data-action="feat-toggle-details"
            data-id="{{this.id}}"
            aria-expanded="false"
          >
            {{this.name}}
          </button>
          <div class="feat-actions">
            <button
              type="button"
              class="feat-edit"
              data-action="feat-open"
              data-id="{{this.id}}"
              aria-label="{{localize 'RMRPG.Actor.Inventory.Edit'}}"
              title="{{localize 'RMRPG.Actor.Inventory.Edit'}}"
            >
              <i class="fas fa-pen"></i>
            </button>
            <button type="button" class="feat-remove" data-action="feat-delete" data-id="{{this.id}}" aria-label="{{localize 'RMRPG.Actor.Feats.Delete'}}">
              <i class="fas fa-trash"></i>
            </button>
          </div>
          <div class="feat-details">
            <p class="feat-detail-line">
              <span class="feat-detail-label">{{localize "RMRPG.Item.Feat.Requirements"}}</span>
              <span class="feat-detail-value">{{#if this.requirementsText}}{{this.requirementsText}}{{else}}-{{/if}}</span>
            </p>
            <div class="feat-details-divider"></div>
            <p class="feat-detail-line feat-detail-line-description">
              <span class="feat-detail-value">{{#if this.descriptionText}}{{this.descriptionText}}{{else}}-{{/if}}</span>
            </p>
          </div>
        </div>
        {{/each}}
      </div>
    </section>
  </div>
  {{/if}}
</div>
